<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        div {
            width: 300px;
            height: 300px;
        }
        #red {
            background-color: red;
            float: left
        }
        #green {
            background-color: green;
            float: left
        }
        #blue {
            background-color: blue;
            clear: both;
            float: left;
        }
        #yellow {
            background-color: yellow;
            float: left;
        }
        button {
            float: left;
            height: 200px;
            width: 200px;
            clear:both;
        }
    </style>
</head>
<body>
    <div id="red"></div>
    <div id="green"></div>
    <div id="blue"></div>
    <div id="yellow"></div>
    <button>Start</button>

    <script src="js/howler.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        var randomized = '';
        var entered = '';
        var clickable = false;
        var score = 0;
        var red = $('#red');
        var blue = $('#blue');
        var green = $('#green');
        var yellow = $('#yellow');
        var sound = new Howl({
            src: ['sounds/soundsprite.ogg'],
            sprite: {
                error: [0, 1500],
                red: [2000, 2000],
                blue: [4000, 2500],
                green: [7000, 1000],
                yellow: [8000, 2000]
            }
        });

        var randomizer = function(){return Math.floor(Math.random() * 4)};
        $('button').click(function(){
            randomized = '';
            alert("Starting now!");
            animateOld();
        });
        red.click(function(){
            if(clickable == false) {
            } else {
                entered += "r";
                red.animate({
                    backgroundColor: "pink"
                }, 300).animate({
                    backgroundColor: "red"
                }, 300);
                clickable = false;
                if(entered.substring(0) != randomized.substring(0, entered.length)){
                    entered = '';
                    randomized = '';
                    sound.play('error');
                    alert("You lose! Score: "+ score + " || Try again.");
                    score = 0;
                } else if (entered == randomized) {
                    sound.play('red');
                    setTimeout(function(){animateOld();}, 1500);
                    entered = '';
                    score ++;
                } else {
                    sound.play('red');
                    clickable = true;
                }
            }
        });
        blue.click(function(){
            if(clickable == false) {
            } else {
                entered += "b";
                blue.animate({
                    backgroundColor: "light-blue"
                }, 300).animate({
                    backgroundColor: "blue"
                }, 300);
                clickable = false;
                if(entered.substring(0) != randomized.substring(0, entered.length)){
                    entered = '';
                    randomized = '';
                    sound.play('error');
                    alert("You lose! Score: "+ score + " || Try again.");
                    score = 0;
                } else if (entered == randomized) {
                    sound.play('blue');
                    setTimeout(function(){animateOld();}, 1500);
                    entered = '';
                    score ++;
                } else {
                    sound.play('blue');
                    clickable = true;
                }
            }
        });
        green.click(function(){
            if(clickable == false) {
            } else {
                entered += "g";
                green.animate({
                    backgroundColor: "light-green"
                }, 300).animate({
                    backgroundColor: "green"
                }, 300);
                clickable = false;
                if(entered.substring(0) != randomized.substring(0, entered.length)){
                    entered = '';
                    randomized = '';
                    sound.play('error');
                    alert("You lose! Score: "+ score + " || Try again.");
                    score = 0;
                } else if (entered == randomized) {
                    sound.play('green');
                    setTimeout(function(){animateOld();}, 1500);
                    entered = '';
                    score ++;
                } else {
                    sound.play('green');
                    clickable = true;
                }
            }
        });
        yellow.click(function(){
            if(clickable == false) {
            } else {
                entered += "y";
                yellow.animate({
                    backgroundColor: "orange"
                }, 300).animate({
                    backgroundColor: "yellow"
                }, 300);
                clickable = false;
                if(entered.substring(0) != randomized.substring(0, entered.length)){
                    entered = '';
                    randomized = '';
                    sound.play('error');
                    alert("You lose! Score: "+ score + " || Try again.");
                    score = 0;
                } else if (entered == randomized) {
                    sound.play('yellow');
                    setTimeout(function(){animateOld();}, 1500);
                    entered = '';
                    score ++;
                } else {
                    sound.play('yellow');
                    clickable = true;
                }

            }
        });


        function rgby() {
            var random = randomizer();
            console.log(random);
            if(random == 0){
                randomized += 'r';
            } else if (random == 1) {
                randomized += 'g';
            } else if (random == 2) {
                randomized += 'b';
            } else {
                randomized += 'y';
            }
            console.log('randomized = ' + randomized);
            clickable = true;
        }
        function animateOld() {
                var i = 0;
                rgby();
                var IntervalOne = setInterval(function(){
                console.log("i = " + i);
                console.log(randomized.charAt(i));
                var color = randomized.charAt(i);
                if(randomized.charAt(i) == 'r'){
                    console.log("animating red");
                    red.animate({
                        backgroundColor: "pink"
                    }, 300).animate({
                        backgroundColor: "red"
                    }, 300);
                    sound.play('red');
                } else if (randomized.charAt(i) == 'g') {
                    console.log("animating green");
                    green.animate({
                        backgroundColor: "light-green"
                    }, 300).animate({
                        backgroundColor: "green"
                    }, 300);
                    sound.play('green');
                } else if (randomized.charAt(i) == 'b') {
                    console.log("animating blue");
                    blue.animate({
                        backgroundColor: "light-blue"
                    }, 300).animate({
                        backgroundColor: "blue"
                    }, 300);
                    sound.play('blue');
                } else if (randomized.charAt(i) == 'y') {
                    console.log("animating yellow");
                    yellow.animate({
                        backgroundColor: "orange"
                    }, 300).animate({
                        backgroundColor: "yellow"
                    }, 300);
                    sound.play('yellow');
                } else {
                    console.log("WTF is happening? color " + color + " i " + i);
                }
                if(i == randomized.length - 1){
                    clearInterval(IntervalOne)
                } else {
                    i++;
                }
                }, 800);
        }
    </script>
</body>
</html>